<?xml version="1.0" encoding="utf-8"?>
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-12-28 Sat 12:09 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Síťové aplikace a správa sítí</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="John Doe" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/styles/readtheorg/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/styles/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/styles/readtheorg/js/readtheorg.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<h1 class="title">Síťové aplikace a správa sítí</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgb005965">1. Architektura sítí</a>
<ul>
<li><a href="#org650da73">1.1. Model OSI</a></li>
<li><a href="#orge6d7deb">1.2. Model IEEE</a></li>
<li><a href="#org00948ae">1.3. Model TCP/IP</a></li>
</ul>
</li>
<li><a href="#org1349143">2. Adresování</a>
<ul>
<li><a href="#orgff731a0">2.1. Adresa</a></li>
<li><a href="#org9fc0a71">2.2. Adresování a směrování v modelu TCP/IP</a></li>
<li><a href="#org1751e0c">2.3. Adresování a směrování na fyzickém rozhraní (L2)</a>
<ul>
<li><a href="#orge3f4448">2.3.1. Speciální adresy L2 vrstvy</a></li>
</ul>
</li>
<li><a href="#orge828c6a">2.4. Adresování a směrování na síťové (IP) vrstvě</a>
<ul>
<li><a href="#orgc1aa3d2">2.4.1. Přidělování adres</a></li>
</ul>
</li>
<li><a href="#org8a5f1f9">2.5. Adresování a směrování na transportní vrstvě</a></li>
<li><a href="#orgf44b541">2.6. Adresování na aplikační vrstvě</a></li>
</ul>
</li>
<li><a href="#org5bd45ac">3. Základní nástroje pro konfiguraci</a>
<ul>
<li><a href="#orgdad5bb7">3.1. Výpis aktuálního síťového nastavení</a></li>
<li><a href="#orga15b05a">3.2. Testování základní konektivity</a></li>
<li><a href="#orgcb6d370">3.3. Kontrola směrování</a></li>
<li><a href="#org235e034">3.4. Testování dosažitelnosti vzdáleného počítače</a></li>
<li><a href="#org2e52482">3.5. Testování dostupnosti služeb</a></li>
<li><a href="#orge157462">3.6. Výpis otevřených spojení</a></li>
<li><a href="#org9d3e03d">3.7. Sledování komunikace na síťovém rozhraní</a></li>
</ul>
</li>
<li><a href="#org5bb3a0b">4. Programování sítí TCP/IP</a>
<ul>
<li><a href="#org35ca895">4.1. Komunikace klient &#x2013; server</a></li>
<li><a href="#org48bc0ca">4.2. Prostředky pro meziprocesovou komunikaci</a></li>
<li><a href="#org3499983">4.3. Sockety</a>
<ul>
<li><a href="#orgc84a16b">4.3.1. Funkce v BSD socketech pro vytvoření konkurentního serveru TCP</a></li>
<li><a href="#org4a32181">4.3.2. UDP schránky</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org571c18e">5. Komunikace typu multicast</a>
<ul>
<li><a href="#org6c99669">5.1. Mapování multicastové adresy IPv4 na MAC adresu</a></li>
<li><a href="#orgaf84d4d">5.2. Mapování multicastové adresy IPv6 na MAC adresu</a></li>
<li><a href="#org41147b3">5.3. Vlastnosti multicastové komunikace</a></li>
<li><a href="#org778fd5b">5.4. Multicast a sockety</a></li>
</ul>
</li>
<li><a href="#orga93443c">6. Analýza paketů na linkové vrstvě</a>
<ul>
<li><a href="#org3e13c19">6.1. Nástroje pro zpracování paketů na linkové vrstvě</a></li>
<li><a href="#org3f963a8">6.2. BSD Packet Filter</a></li>
<li><a href="#orgdaf472c">6.3. Knihovna <code>libpcap</code></a></li>
</ul>
</li>
<li><a href="#orgdb5e5b1">7. Zabezpečení počítačových sítí</a></li>
<li><a href="#org3495884">8. Symetrické šifrování s tajným klíčem</a>
<ul>
<li><a href="#org40b3ddb">8.1. Rovnice pro symetrické šifrování</a></li>
<li><a href="#org84b710a">8.2. Bezpečnost symetrického šifrování</a></li>
<li><a href="#org7e6c77b">8.3. Výhody a nevýhody</a></li>
<li><a href="#orge5d2d13">8.4. Příklady symetrických šifrovacích algoritmů</a>
<ul>
<li><a href="#org69641da">8.4.1. Blokové</a></li>
<li><a href="#org83087e5">8.4.2. Proudové</a></li>
</ul>
</li>
<li><a href="#org214de02">8.5. Nástroje pro symetrické šifrování</a></li>
</ul>
</li>
<li><a href="#org4fe0b98">9. Asymetrické šifrování s veřejným klíčem</a>
<ul>
<li><a href="#org9d13d86">9.1. Princip</a></li>
<li><a href="#orgdbd7213">9.2. Rovnice pro asymetrické šifrování</a>
<ul>
<li><a href="#orgec49cb0">9.2.1. Šifrování</a></li>
<li><a href="#org08a61c4">9.2.2. Dešifrování</a></li>
</ul>
</li>
<li><a href="#org68b2be5">9.3. Výhody a nevýhody</a></li>
<li><a href="#orgeab4431">9.4. Příklady asymetrických šifrovacích algoritmů</a></li>
<li><a href="#orgbdf09f3">9.5. Nástroje pro asymetrické šifrování</a></li>
</ul>
</li>
<li><a href="#org33fb7c0">10. Zajíštění integrity dat pomocí kryptografického hashe</a>
<ul>
<li><a href="#org80ac277">10.1. Nástroje pro hashování</a></li>
</ul>
</li>
<li><a href="#org15e9dc4">11. Elektronický podpis</a>
<ul>
<li><a href="#org3a367d6">11.1. Princip a rovnice</a>
<ul>
<li><a href="#org025cd24">11.1.1. Podepsání</a></li>
<li><a href="#org21c67f5">11.1.2. Ověření podpisu</a></li>
</ul>
</li>
<li><a href="#org5dd549c">11.2. Příklady algoritmů</a></li>
<li><a href="#orgd135e7d">11.3. Používání elektronického podpisu</a></li>
</ul>
</li>
<li><a href="#orgf66935d">12. Digitální certifikát X.509</a>
<ul>
<li><a href="#org4231966">12.1. Obsah certifikátu X.509</a></li>
<li><a href="#orgc409e61">12.2. Použití digitálních certifikátů</a></li>
</ul>
</li>
<li><a href="#org941c96b">13. Diffie-Hellman</a>
<ul>
<li><a href="#org944b97b">13.1. Postup</a></li>
</ul>
</li>
<li><a href="#org7490109">14. Zabezpečení komunikace na modelu TCP/IP</a></li>
<li><a href="#orgcf03816">15. Transport Layer Security (TLS)</a>
<ul>
<li><a href="#org6e7c5aa">15.1. TLS Handshake</a></li>
<li><a href="#org237d268">15.2. Vlastnosti</a></li>
<li><a href="#org7b201ce">15.3. Omezení TLS</a></li>
</ul>
</li>
<li><a href="#orgaacea9f">16. IPSec</a>
<ul>
<li><a href="#orgd2efee2">16.1. Protokol AH (Authentication Header)</a></li>
<li><a href="#orge790b62">16.2. Protokol ESP (Encapsulation Security Protocol)</a></li>
</ul>
</li>
<li><a href="#org860cdcc">17. Zabezpečení emailových zpráv pomocí PGP (Pretty Good Privacy)</a></li>
<li><a href="#org0f7bdbd">18. Autentizace zpráv směrovacího protokolu OSPF</a></li>
<li><a href="#org4fbad85">19. Domain Name System</a>
<ul>
<li><a href="#orgaa86633">19.1. Správa domén</a></li>
<li><a href="#org0bf09c4">19.2. Správa IP adres</a></li>
<li><a href="#orgbf1db6c">19.3. Whois</a></li>
<li><a href="#org9bc8483">19.4. DNS server</a></li>
<li><a href="#orgb99ff72">19.5. Protokol DNS</a></li>
<li><a href="#org16f3aaf">19.6. DNS rezoluce</a>
<ul>
<li><a href="#orgd23e03e">19.6.1. Rekurzivní dotaz</a></li>
<li><a href="#org12665ce">19.6.2. Iterativní dotaz</a></li>
</ul>
</li>
<li><a href="#org8f0e96f">19.7. Přenos zón</a></li>
<li><a href="#orgf53820e">19.8. Typy záznamů v DNS</a>
<ul>
<li><a href="#org667d6de">19.8.1. Start of Authority (SOA)</a></li>
<li><a href="#org6a6a94d">19.8.2. Name Server (NS)</a></li>
<li><a href="#org53b1eb4">19.8.3. A</a></li>
<li><a href="#org0b152c3">19.8.4. AAAA</a></li>
<li><a href="#orgb2b6a1c">19.8.5. Mail Exchange (MX)</a></li>
<li><a href="#orgd719787">19.8.6. Canonical Name (CNAME)</a></li>
<li><a href="#org615648c">19.8.7. Domain Name Pointer (PTR)</a></li>
<li><a href="#orge173476">19.8.8. Naming Autority Pointer (NAPTR)</a></li>
<li><a href="#org421758f">19.8.9. Service Record (SRV)</a></li>
<li><a href="#org261e45e">19.8.10. Text (TXT)</a></li>
</ul>
</li>
<li><a href="#org29b80bf">19.9. Zabezpečení systému DNS</a>
<ul>
<li><a href="#orge3a0320">19.9.1. Bezpečnostní rizika</a></li>
<li><a href="#orgc1bc136">19.9.2. DNSSEC</a></li>
</ul>
</li>
<li><a href="#orge128bbc">19.10. Monitorování provozu DNS</a></li>
</ul>
</li>
<li><a href="#org44773b4">20. Hlasové služby</a>
<ul>
<li><a href="#orgdc4ef76">20.1. Funkce IP telefonie</a></li>
<li><a href="#org27e7e91">20.2. Kódování hlasu</a></li>
<li><a href="#org80e5b01">20.3. Zapouzdření hlasu</a>
<ul>
<li><a href="#org5e9ef19">20.3.1. Příklad</a></li>
</ul>
</li>
<li><a href="#orgb5e0463">20.4. Architektura systému SIP</a>
<ul>
<li><a href="#org88ce135">20.4.1. SIP server (User Agent Server)</a></li>
</ul>
</li>
<li><a href="#org702ca3c">20.5. Adresování a směrování SIP</a></li>
<li><a href="#orga296db4">20.6. Vytváření spojení</a>
<ul>
<li><a href="#orgd7f11ea">20.6.1. Registrace</a></li>
<li><a href="#orga34dae2">20.6.2. Ustavení spojení</a></li>
</ul>
</li>
<li><a href="#org3c00b13">20.7. Protokol SIP</a></li>
<li><a href="#orgc989efe">20.8. Protokol SDP</a></li>
<li><a href="#org129cc37">20.9. Protokol RTP</a></li>
<li><a href="#org3f8926b">20.10. Zabezpečení VoIP</a>
<ul>
<li><a href="#org9c3e9ba">20.10.1. Bezpečnostní rizika</a></li>
<li><a href="#org2f233ec">20.10.2. Způsoby zabezpečení</a></li>
</ul>
</li>
<li><a href="#org50dc959">20.11. Komerční aplikace</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgb005965" class="outline-2">
<h2 id="orgb005965"><span class="section-number-2">1</span> Architektura sítí</h2>
<div class="outline-text-2" id="text-1">
<p>
Vrstvový model definuje síťové vrstvy.
Každá vrstva určuje obecné funkce poskytované vyšším vrstvám.
Funkce dané vrstvy jsou implementovány příslušnými protokoly dané vrstvy.
Pro služby vyšší vrstvy je činnost nižších vrstev transparentní.
</p>

<p>
Při komunikaci na vrstvách komunikující koncové body leží vždy ve stejné vrstvě
a pro komunikaci se využívá služeb nižších vrstev.
</p>

<p>
Procesy aplikační vrstvy komunikují pomocí socketů (schránek). Ty jsou
identifikovány IP adresou a číslem portu.
</p>
</div>


<div id="outline-container-org650da73" class="outline-3">
<h3 id="org650da73"><span class="section-number-3">1.1</span> Model OSI</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Model OSI definuje 7 vrstev:
</p>

<ol class="org-ol">
<li>Fyzická vrstva</li>
<li>Linková vrstva</li>
<li>Síťová vrstva</li>
<li>Transportní vrstva</li>
<li>Vrstva sezení</li>
<li>Prezentační vrstva</li>
<li>Aplikační vrstva</li>
</ol>
</div>
</div>

<div id="outline-container-orge6d7deb" class="outline-3">
<h3 id="orge6d7deb"><span class="section-number-3">1.2</span> Model IEEE</h3>
<div class="outline-text-3" id="text-1-2">
<p>
Model IEEE definuje 2 vrstvy:
</p>

<ol class="org-ol">
<li>MAC vrstva</li>
<li>LLC vrstva</li>
</ol>
</div>
</div>

<div id="outline-container-org00948ae" class="outline-3">
<h3 id="org00948ae"><span class="section-number-3">1.3</span> Model TCP/IP</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Definuje 4 vrstvy:
</p>

<ol class="org-ol">
<li>Vrstva síťového rozhraní (fyzická a linková vrstva dle OSI)</li>
<li>Internetová vrstva (síťová vrstva dle OSI)</li>
<li>Transportní vrstva</li>
<li>Aplikační vrstva</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-org1349143" class="outline-2">
<h2 id="org1349143"><span class="section-number-2">2</span> Adresování</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-orgff731a0" class="outline-3">
<h3 id="orgff731a0"><span class="section-number-3">2.1</span> Adresa</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Adresa je způsob identifikace adresáta pomocí jednoznačné informace
</p>
</div>
</div>

<div id="outline-container-org9fc0a71" class="outline-3">
<h3 id="org9fc0a71"><span class="section-number-3">2.2</span> Adresování a směrování v modelu TCP/IP</h3>
<div class="outline-text-3" id="text-2-2">
<p>
Každá vrstva modelu TCP/IP definuje svoje adresování a zajišťuje určitou formu
směrování. Některé služby používají mapování adres mezi vrstvami.
</p>
</div>
</div>

<div id="outline-container-org1751e0c" class="outline-3">
<h3 id="org1751e0c"><span class="section-number-3">2.3</span> Adresování a směrování na fyzickém rozhraní (L2)</h3>
<div class="outline-text-3" id="text-2-3">
<p>
Adresuje se konkrétní síťové rozhraní počítače. To je identifikováno 48bitovou
fyzickou adresou. Ta určuje adresování v lokální síti. Prvních 24 bitů je OUI
(Organizational Unique Identifier), zbylých 24 bitů je číslo síťového rozhraní
přiděleného výrobcem karty. L2 rámec obsahuje:
</p>
<ul class="org-ul">
<li>7+1B preambule (synchronizace + typ)</li>
<li>48b source address</li>
<li>48b destination address</li>
<li>16b ethertype</li>
<li>&#x2026; data &#x2026; (max 1500 B)</li>
<li>32b checksum</li>
</ul>
</div>

<div id="outline-container-orge3f4448" class="outline-4">
<h4 id="orge3f4448"><span class="section-number-4">2.3.1</span> Speciální adresy L2 vrstvy</h4>
<div class="outline-text-4" id="text-2-3-1">
<ul class="org-ul">
<li>Broadcast: <code>FF FF FF FF FF FF</code></li>
<li>IPv4 multicast <code>01 00 5e xx xx xx</code></li>
<li>IPv6 multicast <code>33 33 xx xx xx xx</code></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orge828c6a" class="outline-3">
<h3 id="orge828c6a"><span class="section-number-3">2.4</span> Adresování a směrování na síťové (IP) vrstvě</h3>
<div class="outline-text-3" id="text-2-4">
<p>
Používá se 32bitová IPv4 adresa nebo 128bitová IPv6 adresa. IP adresa
jednoznačně identifikuje síťové rozhraní počítače v síti. Je určena pro
adresování i mimo lokální síť.
</p>

<p>
IPv4 se může adresovat s využitím tříd (A, B, C, D, E). Používá se <code>netid +
hostid</code>. Délku části <code>netid</code> určuje pevná nebo proměnná maska.
</p>

<p>
Při použití variabilní délky masky se prostor IPv4 adres dá efektivněji využít,
vytváří se podsítě (subnetting). Používá se beztřídní směrování.
</p>
</div>

<div id="outline-container-orgc1aa3d2" class="outline-4">
<h4 id="orgc1aa3d2"><span class="section-number-4">2.4.1</span> Přidělování adres</h4>
<div class="outline-text-4" id="text-2-4-1">
<p>
Přidělení IP adres může být provedeno buď manuálně v operačním systému nebo
dynamicky pomocí DHCP.
</p>

<p>
Pro IPv4 se používá protokol DHCPv4. Nové zařízení vyhledává DHCP server na
lokální síti pomocí broadcastu.
</p>

<p>
Pro IPv6 se používá více způsobů přidělování adres. Typ přidělení oznamuje
směrovač zprávou ICMPv6 RA. Typ konfigurace může být:
</p>

<ol class="org-ol">
<li>Bezstavová konfigurace pomocí SLAAC (Stateless Autoconfiguration)</li>
<li>Bezstavová konfigurace pomocí SLAAC a DHCPv6</li>
<li>Stavová konfigurace pomocí DHCPv6</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-org8a5f1f9" class="outline-3">
<h3 id="org8a5f1f9"><span class="section-number-3">2.5</span> Adresování a směrování na transportní vrstvě</h3>
<div class="outline-text-3" id="text-2-5">
<p>
Adresuje je konkrétní služba pomocí 16b čísla portu (uvedena v <code>/etc/services</code>).
Číslo portu jednoznačně identifiuje službu na daném počítači. Rozlišujeme
spojované (TCP) a nespojované (UDP) služby.
</p>
</div>
</div>

<div id="outline-container-orgf44b541" class="outline-3">
<h3 id="orgf44b541"><span class="section-number-3">2.6</span> Adresování na aplikační vrstvě</h3>
<div class="outline-text-3" id="text-2-6">
<p>
Je závislé na konkrétní aplikaci. Příklady:
</p>
<ul class="org-ul">
<li>Elektronická pošta: xlogin00@stud.fit.vutbr.cz</li>
<li>DNS: eva.fit.vutbr.cz</li>
<li>WWW: <a href="http://www.fit.vutbr.cz/index.html">http://www.fit.vutbr.cz/index.html</a></li>
<li>IP telefonie: sip:login@cesnet.cz</li>
<li>SNMP: 1.3.6.1.2.1.2.1 (ifNumber)</li>
<li>LDAP: cn=login, ou=Students, dc=vutbr, dc=cz</li>
<li>FTP: /public/index.txt</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org5bd45ac" class="outline-2">
<h2 id="org5bd45ac"><span class="section-number-2">3</span> Základní nástroje pro konfiguraci</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-orgdad5bb7" class="outline-3">
<h3 id="orgdad5bb7"><span class="section-number-3">3.1</span> Výpis aktuálního síťového nastavení</h3>
<div class="outline-text-3" id="text-3-1">
<ul class="org-ul">
<li><code>ifconfig</code>, <code>ip link</code>, <code>ip address</code> (Linux)</li>
<li><code>ipconfig</code> (Windows)</li>
</ul>
</div>
</div>

<div id="outline-container-orga15b05a" class="outline-3">
<h3 id="orga15b05a"><span class="section-number-3">3.2</span> Testování základní konektivity</h3>
<div class="outline-text-3" id="text-3-2">
<ul class="org-ul">
<li><code>ping</code>, <code>pathping</code></li>
</ul>
</div>
</div>

<div id="outline-container-orgcb6d370" class="outline-3">
<h3 id="orgcb6d370"><span class="section-number-3">3.3</span> Kontrola směrování</h3>
<div class="outline-text-3" id="text-3-3">
<ul class="org-ul">
<li><code>netstat -r</code>, <code>ip route</code> : Vypíše směrovací tabulku</li>
<li><code>arp -a</code>, <code>ip neigh</code> : Vypíše tabulku ARP, respektive Neighbour Cache</li>
</ul>
</div>
</div>

<div id="outline-container-org235e034" class="outline-3">
<h3 id="org235e034"><span class="section-number-3">3.4</span> Testování dosažitelnosti vzdáleného počítače</h3>
<div class="outline-text-3" id="text-3-4">
<ul class="org-ul">
<li><code>tracert</code>, <code>traceroute</code>, <code>tcptraceroute</code></li>
</ul>
</div>
</div>

<div id="outline-container-org2e52482" class="outline-3">
<h3 id="org2e52482"><span class="section-number-3">3.5</span> Testování dostupnosti služeb</h3>
<div class="outline-text-3" id="text-3-5">
<ul class="org-ul">
<li><code>telnet &lt;addr&gt; &lt;port&gt;</code></li>
</ul>
</div>
</div>

<div id="outline-container-orge157462" class="outline-3">
<h3 id="orge157462"><span class="section-number-3">3.6</span> Výpis otevřených spojení</h3>
<div class="outline-text-3" id="text-3-6">
<ul class="org-ul">
<li><code>sockstat</code> (FreeBSD)</li>
<li><code>netstat -natu</code> (Linux)</li>
<li><code>netstat -a</code> (Windows)</li>
</ul>
</div>
</div>

<div id="outline-container-org9d3e03d" class="outline-3">
<h3 id="org9d3e03d"><span class="section-number-3">3.7</span> Sledování komunikace na síťovém rozhraní</h3>
<div class="outline-text-3" id="text-3-7">
<ul class="org-ul">
<li><code>tcpdump</code></li>
<li><code>tshark</code></li>
<li>Wireshark (GUI1)</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org5bb3a0b" class="outline-2">
<h2 id="org5bb3a0b"><span class="section-number-2">4</span> Programování sítí TCP/IP</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org35ca895" class="outline-3">
<h3 id="org35ca895"><span class="section-number-3">4.1</span> Komunikace klient &#x2013; server</h3>
<div class="outline-text-3" id="text-4-1">
<p>
Jedná se o standardní schema komunikace mezi dvěma procesy. Komunikace je
popsána protokolem. Klient posílá požadavky na zpracování serveru, ten je
zpracuje a pošle odpověď. Komunikace je obvykle zahájena klientem.
</p>

<p>
Protokol je soubor syntaktických a sématnických pravidel určujících výměnu dat.
Popisuje vytvoření spojení, adresování, přenos dat, řízení toku, zabezpečení.
Formálně je protokol specifikován stavovými automaty, gramatikami, formálními
jazyky, Petriho sítěmi, diagramy posloupnosti zpráv nebo algebraickými
prostředky.
</p>
</div>
</div>

<div id="outline-container-org48bc0ca" class="outline-3">
<h3 id="org48bc0ca"><span class="section-number-3">4.2</span> Prostředky pro meziprocesovou komunikaci</h3>
<div class="outline-text-3" id="text-4-2">
<p>
Unixové roury, Unix to Unix copy, Remote Procedure Call, BSD sockets, Winsock.
</p>
</div>
</div>

<div id="outline-container-org3499983" class="outline-3">
<h3 id="org3499983"><span class="section-number-3">4.3</span> Sockety</h3>
<div class="outline-text-3" id="text-4-3">
<p>
Aplikační programové rozhraní pro komunikující procesy. Definují konečný
komunikační bod. Implementovány jako abstraktní datové struktury obsahující
údaje pro komunikaci. Jsou jednoznačně implementovány v síti pomocí IP adresy a
čísla portu. Jsou implementovány ve většině programovacích jazyků.
</p>

<p>
Vytvářejí rozhraní na vrstvě L4 (transportní). Rozlišujeme několik typů
schránek. Základní typy jsou:
</p>

<ol class="org-ol">
<li><code>SOCK_STREAM</code> (TCP komunikace)</li>
<li><code>SOCK_DGRAM</code> (UDP datagramy)</li>
<li><code>SOCK_RAW</code> (Holá schránka bez žádného protokolu. Nutno vyplnit všechny
hlavičky ručně)</li>
</ol>
</div>

<div id="outline-container-orgc84a16b" class="outline-4">
<h4 id="orgc84a16b"><span class="section-number-4">4.3.1</span> Funkce v BSD socketech pro vytvoření konkurentního serveru TCP</h4>
<div class="outline-text-4" id="text-4-3-1">
<ol class="org-ol">
<li><code>socket()</code> &#x2013; Vytvoří schránku</li>
<li><code>bind()</code> &#x2013; Připojení schránky na lokální port</li>
<li><code>listen()</code> &#x2013; Vytrvoření fronty příchozích požadavků</li>
<li><code>accept()</code> &#x2013; Přijímání požadavků</li>
<li><code>fork()</code> &#x2013; Vytvoření synovského procesu</li>
<li><code>read(), write()</code> &#x2013; Výměna dat v rámci synovského procesu</li>
<li><code>close()</code> &#x2013; Zavření schránky synovského procesu</li>
<li><code>exit()</code> &#x2013; Ukončení synovského procesu</li>
<li><code>close()</code> &#x2013; Uzavření schránky rodičovského procesu</li>
</ol>
</div>
</div>

<div id="outline-container-org4a32181" class="outline-4">
<h4 id="org4a32181"><span class="section-number-4">4.3.2</span> UDP schránky</h4>
<div class="outline-text-4" id="text-4-3-2">
<p>
Když neběží UDP server, klient pošle zprávu pomocí <code>sendto()</code>, čeká na odpověď
pomocí <code>recvfrom()</code>. Dojde ale k uváznutí, protože UDP neposkytuje možnosti, jak
oznámit nedostupný port. Možná řešení jsou použití timeoutu nebo spojovaných UDP
schránek.
</p>

<p>
Spojované UDP schránky používají funkci <code>connect()</code>, nedochází ale k vytvoření
TCP spojení, pouze se zpracovávají chyby. Funkce <code>connect()</code> zjistí aktuální
stav serveru, v budoucnu však může dojít k ukončení činnosti UDP serveru a
klient to nezjístí. Funkce <code>connect()</code> se tak může volat opakovaně.
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-org571c18e" class="outline-2">
<h2 id="org571c18e"><span class="section-number-2">5</span> Komunikace typu multicast</h2>
<div class="outline-text-2" id="text-5">
<p>
Jeden paket doručen skupině  uzlů v multicastové skupině. Používá se jedna
cílová adresa typu multicast. Pro IPv4 tato adresa náleží do třídy D, tedy
rozsah <code>22.0.0.0</code> &#x2013; <code>239.255.255.255</code>. Pro IPv6 se jedná o adresy s prefixem
<code>0xFF00::/8</code>.
</p>

<p>
Multicastová komunikace umožňuje dynamické připojování uzlů do multicastové
skupiny, speciální směrování multicastových adres a řízení dosahu multicastového
vysílání.
</p>

<p>
Pro výpis aktivních multicastových skupin existují příkazy:
</p>
<ul class="org-ul">
<li><code>ifmcstat</code> (FreeBSD)</li>
<li><code>netstat -g</code>, <code>netstat -gn</code> (Linux)</li>
<li><code>netsh interface ip show joins</code> (Windows)</li>
</ul>

<p>
Směrování IP multicastu je implementováno pomocí protokolů DVMRP, PIM, MOSPF.
Připojování uzlů do multicastových skupin probíhá pomocí protokolů IGMPv2,
IGMPv3, MLD.
</p>
</div>

<div id="outline-container-org6c99669" class="outline-3">
<h3 id="org6c99669"><span class="section-number-3">5.1</span> Mapování multicastové adresy IPv4 na MAC adresu</h3>
<div class="outline-text-3" id="text-5-1">
<p>
Prefix multicastové MAC adresy je <code>0x01 01 5e</code>. Z multicastové adresy se použije
jen posledních 23b  do multicastové MAC adresy. Může docházet k překrývání
adres.
</p>
</div>
</div>

<div id="outline-container-orgaf84d4d" class="outline-3">
<h3 id="orgaf84d4d"><span class="section-number-3">5.2</span> Mapování multicastové adresy IPv6 na MAC adresu</h3>
<div class="outline-text-3" id="text-5-2">
<p>
Nejnižších 32b IPv6 adresy je zkopírováno do MAC adresy, prefix multicastové
adresy MAC je <code>0x33 33</code>.
</p>
</div>
</div>

<div id="outline-container-org41147b3" class="outline-3">
<h3 id="org41147b3"><span class="section-number-3">5.3</span> Vlastnosti multicastové komunikace</h3>
<div class="outline-text-3" id="text-5-3">
<p>
Posílá pouze UDP pakety, negarantuje spolehlivé doručení, zachování pořadí&#x2026;
Multicastová adresa identifikuje skupinu síťových rozhraní. Členství ve skupině
je dynamické. Počítače se připojují a odpojují.
</p>
</div>
</div>

<div id="outline-container-org778fd5b" class="outline-3">
<h3 id="org778fd5b"><span class="section-number-3">5.4</span> Multicast a sockety</h3>
<div class="outline-text-3" id="text-5-4">
<p>
Podporované schránky jsou třídy <code>AF_INET</code> nebo <code>AF_INET6</code>, typu <code>SOCK_DGRAM</code>
nebo <code>SOCK_RAW</code>. Multicastové datagramy mají implicitní TTL nastavenu na 1. Pro
vynucení multicastu na socketu se využívá funkce <code>setsockopt()</code>. Konkrétně se
jedná o parametry <code>IP_MULTICAST_IF</code>, <code>IP_MULTICAST_TTL</code>, <code>IP_MULTICAST_LOOP</code>.
</p>

<p>
Na straně klienta je třeba inicializovat rozhraní pro multicast pomocí naplnění
struktury <code>struct ip_mreq</code>. Následně je možné se připojit do multicastové
skupiny voláním funkce <code>setsockopt()</code> s parametrem <code>IP_ADD_MEMBERSHIP</code> a
předáním vytvořené struktury. Pro odpojení od multicastové skupiny se používá
parametr <code>IP_DROP_MEMBERSHIP</code>.
</p>
</div>
</div>
</div>

<div id="outline-container-orga93443c" class="outline-2">
<h2 id="orga93443c"><span class="section-number-2">6</span> Analýza paketů na linkové vrstvě</h2>
<div class="outline-text-2" id="text-6">
<p>
Zahrnuje zachycení paketů z přenosového média, převod binárních dat do
srozumitelné formy, rekonstrukci paketů, analýzu paketů, přenosů a konverzací.
</p>
</div>

<div id="outline-container-org3e13c19" class="outline-3">
<h3 id="org3e13c19"><span class="section-number-3">6.1</span> Nástroje pro zpracování paketů na linkové vrstvě</h3>
<div class="outline-text-3" id="text-6-1">
<ul class="org-ul">
<li>Paketový filtr BPF (BSD Packet Filter)</li>
<li>Linuxová implementace schránekt typu <code>SOCK_PACKET</code>, <code>PF_PACKET</code>.</li>
<li>Knihovna <code>libpcap</code></li>
<li>Knihovna <code>scapy</code> pro Python.</li>
</ul>

<p>
Tyto nástroje zajišťují přímý přístup k paketům na síťovém rozhraní. Aplikace
běží jako uživatelský proces mimo jádro systému v privilegovaném režimu. Pracuje
pouze s kopií paketu
</p>
</div>
</div>

<div id="outline-container-org3f963a8" class="outline-3">
<h3 id="org3f963a8"><span class="section-number-3">6.2</span> BSD Packet Filter</h3>
<div class="outline-text-3" id="text-6-2">
<p>
Řadič síťové karty zavolá BPF pokaždé, když je paket přijat nebo odeslán.
Aplikace nad BPF může filtrovat příchozí pakety, ty jsou uloženy v BPF bufferu.
Když je buffer plný nebo vyprší časovač, data jsou předána aplikaci.
</p>
</div>
</div>

<div id="outline-container-orgdaf472c" class="outline-3">
<h3 id="orgdaf472c"><span class="section-number-3">6.3</span> Knihovna <code>libpcap</code></h3>
<div class="outline-text-3" id="text-6-3">
<p>
Vytváří API pro zachytávání dat na síťpvém rozhraní. Čte data ze síťového
rozhraní nebo ze souboru ve formátu PCAP. Implementuje funkce pro zpracování
rámců a jejich analýzu. Původně určena pro jazyk C/C++, následně vytvořeny
wrappery pro další jazyky.
</p>

<p>
Čtení dat probíhá v následující posloupnosti:
</p>
<ol class="org-ol">
<li>Připojení k síťovému rozhraní <code>pcap_lookupdev()</code>.</li>
<li>Otevření rozhraní pro čtení <code>pcap_open_live()</code>, <code>pcap_open_offline()</code> (pro PCAP)</li>
<li>Čtení paketů <code>pcap_dispatch()</code>, <code>pcap_loop()</code>, <code>pcap_next()</code></li>
<li>Analýzu paketů provádí aplikace.</li>
</ol>
</div>
</div>
</div>


<div id="outline-container-orgdb5e5b1" class="outline-2">
<h2 id="orgdb5e5b1"><span class="section-number-2">7</span> Zabezpečení počítačových sítí</h2>
<div class="outline-text-2" id="text-7">
<p>
V počítačových sítích existují rizika:
</p>
<ul class="org-ul">
<li>Odposlech přenášených dat</li>
<li>Neautorizovaný přístup k zařízením</li>
<li>Podvržení zprávy</li>
<li>Falšování identity</li>
<li>Útok na systém (DoS)</li>
<li>Škodlivý software</li>
</ul>

<p>
Exisutjí požadavky na bezpečnost:
</p>
<ul class="org-ul">
<li>Důvěrnost</li>
<li>Autentizace</li>
<li>Integrita dat</li>
<li>Neodmítnutelnost</li>
<li>Dostupnost, kontrola přístupu</li>
</ul>
</div>
</div>

<div id="outline-container-org3495884" class="outline-2">
<h2 id="org3495884"><span class="section-number-2">8</span> Symetrické šifrování s tajným klíčem</h2>
<div class="outline-text-2" id="text-8">
<p>
Slouží pro zajištění důvěrnosti. Pro šifrování a dešifrování se používá stejný
klíč. Doporučená délka klíče je 112 &#x2013; 256 bitů.
</p>
</div>

<div id="outline-container-org40b3ddb" class="outline-3">
<h3 id="org40b3ddb"><span class="section-number-3">8.1</span> Rovnice pro symetrické šifrování</h3>
<div class="outline-text-3" id="text-8-1">
<p>
Pro šifrování platí vztah:
</p>

\begin{equation}
E_k(M) = C
\end{equation}

<p>
Kde \(E_k\) je šifrovací funkce s klíčem \(K\), \(M\) je vstupní zpráva.
</p>

<p>
Pro dešifrování platí vztah:
</p>

\begin{equation}
D_k(C) = M
\end{equation}

<p>
Kde \(D_k\) je dešifrovací funkce s klíčem \(K\).
</p>
</div>
</div>

<div id="outline-container-org84b710a" class="outline-3">
<h3 id="org84b710a"><span class="section-number-3">8.2</span> Bezpečnost symetrického šifrování</h3>
<div class="outline-text-3" id="text-8-2">
<p>
Bezpečnost symetrického šifrování spočívá v klíči, nikoliv v principu algoritmu
(ten je většinou zveřejněný). Šifrují se buď jednotlivé bity zprávy (proudová
šifra) nebo sekvence bitů o pevné velikosti (bloková šifra).
</p>
</div>
</div>

<div id="outline-container-org7e6c77b" class="outline-3">
<h3 id="org7e6c77b"><span class="section-number-3">8.3</span> Výhody a nevýhody</h3>
<div class="outline-text-3" id="text-8-3">
<p>
Symetrické šifrování má problém s nutností distribuce klíčů a rozšiřitelností.
Naopak výhodou je rychlý výpočet.
</p>
</div>
</div>

<div id="outline-container-orge5d2d13" class="outline-3">
<h3 id="orge5d2d13"><span class="section-number-3">8.4</span> Příklady symetrických šifrovacích algoritmů</h3>
<div class="outline-text-3" id="text-8-4">
</div>
<div id="outline-container-org69641da" class="outline-4">
<h4 id="org69641da"><span class="section-number-4">8.4.1</span> Blokové</h4>
<div class="outline-text-4" id="text-8-4-1">
<ul class="org-ul">
<li>DES</li>
<li>3DES</li>
<li>AES</li>
<li>IDEA</li>
<li>RC2/4/5/6</li>
<li>Blowfish</li>
</ul>
</div>
</div>

<div id="outline-container-org83087e5" class="outline-4">
<h4 id="org83087e5"><span class="section-number-4">8.4.2</span> Proudové</h4>
<div class="outline-text-4" id="text-8-4-2">
<ul class="org-ul">
<li>DES</li>
<li>3DES</li>
<li>RC4</li>
<li>SEAL</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org214de02" class="outline-3">
<h3 id="org214de02"><span class="section-number-3">8.5</span> Nástroje pro symetrické šifrování</h3>
<div class="outline-text-3" id="text-8-5">
<p>
Nejpoužívanější je nástroj <code>openssl enc</code>. Obsahuje sadu šifrovacích a
dešifrovacích algoritmů.
</p>
</div>
</div>
</div>

<div id="outline-container-org4fe0b98" class="outline-2">
<h2 id="org4fe0b98"><span class="section-number-2">9</span> Asymetrické šifrování s veřejným klíčem</h2>
<div class="outline-text-2" id="text-9">
<p>
Slouží pro zajištění důvěrnosti a autentizaci.
</p>
</div>

<div id="outline-container-org9d13d86" class="outline-3">
<h3 id="org9d13d86"><span class="section-number-3">9.1</span> Princip</h3>
<div class="outline-text-3" id="text-9-1">
<p>
Příjemce vygeneruje dva klíče:
</p>
<ol class="org-ol">
<li>Veřejný klíč \(KB_{pub}\) pro šifrování</li>
<li>Soukromý klíč \(KB_{sec}\) pro dešifrování</li>
</ol>

<p>
Klíč pro šifrování se liší od klíče pro dešifrování. Doporučená dékla klíče je
2048 &#x2013; 4096 bitů. Soukromý klíč se nedá odvodit z veřejného.
</p>
</div>
</div>

<div id="outline-container-orgdbd7213" class="outline-3">
<h3 id="orgdbd7213"><span class="section-number-3">9.2</span> Rovnice pro asymetrické šifrování</h3>
<div class="outline-text-3" id="text-9-2">
</div>
<div id="outline-container-orgec49cb0" class="outline-4">
<h4 id="orgec49cb0"><span class="section-number-4">9.2.1</span> Šifrování</h4>
<div class="outline-text-4" id="text-9-2-1">
\begin{equation}
E_{KB_{pub}}(M) = C
\end{equation}

<p>
Může provést kdokoliv veřejným klíčem příjemce.
</p>
</div>
</div>

<div id="outline-container-org08a61c4" class="outline-4">
<h4 id="org08a61c4"><span class="section-number-4">9.2.2</span> Dešifrování</h4>
<div class="outline-text-4" id="text-9-2-2">
\begin{equation}
D_{KB_{sec}}(C) = M
\end{equation}

<p>
Může provést pouze příjemce svým soukromým klíčem.
</p>
</div>
</div>
</div>

<div id="outline-container-org68b2be5" class="outline-3">
<h3 id="org68b2be5"><span class="section-number-3">9.3</span> Výhody a nevýhody</h3>
<div class="outline-text-3" id="text-9-3">
<p>
Snadná rozšiřitelnost, protože veřejný klíč lze vystavit veřejně. Náročné na
výpočet kvůli použití dlouhého klíče. Problém s ověřením pravosti veřejného
klíče, vyžaduje certifikační autoritu.
</p>
</div>
</div>

<div id="outline-container-orgeab4431" class="outline-3">
<h3 id="orgeab4431"><span class="section-number-3">9.4</span> Příklady asymetrických šifrovacích algoritmů</h3>
<div class="outline-text-3" id="text-9-4">
<ul class="org-ul">
<li>RSA</li>
<li>ElGamal</li>
<li>Eliptic curve</li>
<li>Diffie-Hellman</li>
</ul>
</div>
</div>

<div id="outline-container-orgbdf09f3" class="outline-3">
<h3 id="orgbdf09f3"><span class="section-number-3">9.5</span> Nástroje pro asymetrické šifrování</h3>
<div class="outline-text-3" id="text-9-5">
<p>
Používají se nástroje <code>openssl genpkey</code>, <code>openssl pkeyutl</code>, <code>opoenssl rsa</code>.
Soukromé klíče je možné ochránit symetrickou šifrou proti zneužití.
</p>
</div>
</div>
</div>

<div id="outline-container-org33fb7c0" class="outline-2">
<h2 id="org33fb7c0"><span class="section-number-2">10</span> Zajíštění integrity dat pomocí kryptografického hashe</h2>
<div class="outline-text-2" id="text-10">
<p>
Zajišťuje integritu zprávy pomocí tajného klíče. Využívá kryptografickou
hashovací funkci, např. MD4/5/6, SHA1/2/3. Ta vytvoří kryptografický hash MAC
(Message Authentication Code) o pevné délce. Mechanismus HMAC přidává navíc do
výpočtu tajný klíč.
</p>

<p>
V počítačových sítích se používá hashování pro autentizaci směrovacích zpráv,
při použití TLS, PGP, SSH, IPSec nebo pro autentizaci zpráv SMMPv3.
</p>
</div>

<div id="outline-container-org80ac277" class="outline-3">
<h3 id="org80ac277"><span class="section-number-3">10.1</span> Nástroje pro hashování</h3>
<div class="outline-text-3" id="text-10-1">
<ul class="org-ul">
<li><code>md5</code></li>
<li><code>sha1</code></li>
<li><code>sha256</code></li>
<li><code>sha384</code></li>
<li><code>sha512</code></li>
<li><code>shasum</code></li>
<li><code>openssl dgst</code></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org15e9dc4" class="outline-2">
<h2 id="org15e9dc4"><span class="section-number-2">11</span> Elektronický podpis</h2>
<div class="outline-text-2" id="text-11">
<p>
Využívá asymetrické kryprografie pro ověření odesilatele pomocí jeho soukromého
klíče.
</p>
</div>

<div id="outline-container-org3a367d6" class="outline-3">
<h3 id="org3a367d6"><span class="section-number-3">11.1</span> Princip a rovnice</h3>
<div class="outline-text-3" id="text-11-1">
<p>
Odesilatel A si vygeneruje dvojici klíčů \(KA_{sec}\) a \(KA_{pub}\).
</p>
</div>

<div id="outline-container-org025cd24" class="outline-4">
<h4 id="org025cd24"><span class="section-number-4">11.1.1</span> Podepsání</h4>
<div class="outline-text-4" id="text-11-1-1">
\begin{equation}
E_{KA_{sec}}(MD) = DS
\end{equation}

<p>
Kde \(E\) je šifrovací funkce, \(MD\) (Message Digest) je hash dokumentu a \(DS\) je
elektronický podpis.
</p>
</div>
</div>

<div id="outline-container-org21c67f5" class="outline-4">
<h4 id="org21c67f5"><span class="section-number-4">11.1.2</span> Ověření podpisu</h4>
<div class="outline-text-4" id="text-11-1-2">
<p>
Příjemce vypočítá hash dokumentu \(MD'\) a porovná s dešifrovaným podpisem:
</p>

\begin{equation}
E_{KA_{pub}}(DS) = MD
\end{equation}
</div>
</div>
</div>

<div id="outline-container-org5dd549c" class="outline-3">
<h3 id="org5dd549c"><span class="section-number-3">11.2</span> Příklady algoritmů</h3>
<div class="outline-text-3" id="text-11-2">
<ul class="org-ul">
<li>RSA</li>
<li>DSA</li>
<li>Elliptic Curve DSA</li>
</ul>
</div>
</div>

<div id="outline-container-orgd135e7d" class="outline-3">
<h3 id="orgd135e7d"><span class="section-number-3">11.3</span> Používání elektronického podpisu</h3>
<div class="outline-text-3" id="text-11-3">
<p>
Pro používání elektronických podpisů je zřízen systém <i>Public Key
Infrastructure</i>, což je systém certifikačních autorit pro správu, uložení a
ověření veřejných klíčů. CA generuje, podepisuje, ukládá a ověřuje certifikáty k
veřejným klíčům. Ověřuje identitu uživatelů, aplikací nebo organizací a vytváří
vazbu s veřejným klíčem.
</p>
</div>
</div>
</div>

<div id="outline-container-orgf66935d" class="outline-2">
<h2 id="orgf66935d"><span class="section-number-2">12</span> Digitální certifikát X.509</h2>
<div class="outline-text-2" id="text-12">
<p>
Dokument ověřující platnost pravého veřejného klíče a příslušnost k danému
uživateli. Certifikát vydává a ověřuje certifikační autorita. Pro ověření
podpisu CA se používá certifikát kořenové CA. K ověření slouží protokol OSCP
(Online Certificate Status Protocol).
</p>
</div>

<div id="outline-container-org4231966" class="outline-3">
<h3 id="org4231966"><span class="section-number-3">12.1</span> Obsah certifikátu X.509</h3>
<div class="outline-text-3" id="text-12-1">
<ul class="org-ul">
<li>Sériové číslo</li>
<li>Identifikace vydavatele (Distinguished Name: DN)</li>
<li>Datum platnosti</li>
<li>Identifikace majitele (DN)</li>
<li>Veřejný klíč majitele</li>
<li>Účel veřejného klíče (šifrování, ověřování podpisů)</li>
<li>Podpis certifikátu podepsaný soukromým klíčem CA</li>
<li>Algoritmus pro vytvoření podpisu</li>
<li>Otisk certifikátu (hash)</li>
<li>Algoritmus pro vytvoření hashe</li>
<li>Odkaz na seznam revokovaných certifikátů (CRL)</li>
</ul>
</div>
</div>

<div id="outline-container-orgc409e61" class="outline-3">
<h3 id="orgc409e61"><span class="section-number-3">12.2</span> Použití digitálních certifikátů</h3>
<div class="outline-text-3" id="text-12-2">
<ul class="org-ul">
<li>Bezpečný transport SSL/TLS</li>
<li>Zapezpečení IPSec</li>
<li>HTTPS</li>
<li>S/MIME</li>
<li>Autentizace uživatelů pomocí 802.1x</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org941c96b" class="outline-2">
<h2 id="org941c96b"><span class="section-number-2">13</span> Diffie-Hellman</h2>
<div class="outline-text-2" id="text-13">
<p>
Asymetrický algoritmus pro vytvoření sdíleného tajného klíče přes nezabezpečený
kanál založený na umocňování čísel, kde \((A^B)^C = (A^C)^B\). Nevyžaduje
šifrování.
</p>
</div>

<div id="outline-container-org944b97b" class="outline-3">
<h3 id="org944b97b"><span class="section-number-3">13.1</span> Postup</h3>
<div class="outline-text-3" id="text-13-1">
<ol class="org-ol">
<li>Uzly A a B se veřejně dohodnou na použitém modulu \(m\) a základu \(z\).</li>
<li>Uzel A si zvolí tajné číslo \(a\).</li>
<li>Uzel A pošle veřejně uzlu B hodnotu \(x = z^a mod m\).</li>
<li>Uzel B si zvolí tajné číslo \(b\).</li>
<li>Uzel B pošle uzlu A hodnotu \(y = z^b mod m\).</li>
<li>Uzel A určí klíč \(k = y^a mod m\).</li>
<li>Uzel B spočítá klíč \(k = x^b mod m\).</li>
<li>Klíč \(k\) se v uzlech A a B rovná.</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-org7490109" class="outline-2">
<h2 id="org7490109"><span class="section-number-2">14</span> Zabezpečení komunikace na modelu TCP/IP</h2>
<div class="outline-text-2" id="text-14">
<p>
Nezávislé zabezpečení dat na jednotlivých vrstvách TCP/IP. Každý mechanismus
vyžaduje vytvoření a distribuci klíčů, jejich zabezpečení a ověření. Dosah
zabezpečení závisí na typu vrstvy.
</p>
</div>
</div>

<div id="outline-container-orgcf03816" class="outline-2">
<h2 id="orgcf03816"><span class="section-number-2">15</span> Transport Layer Security (TLS)</h2>
<div class="outline-text-2" id="text-15">
<p>
Komunikuje nad transportní vrstvou v TCP paketech. Zapezpečuje přenos dat
protokolů aplikační vrstvy. Zajišťuje důvěrnost, integritu dat a autentizaci
klienta či serveru.
</p>
</div>

<div id="outline-container-org6e7c5aa" class="outline-3">
<h3 id="org6e7c5aa"><span class="section-number-3">15.1</span> TLS Handshake</h3>
<div class="outline-text-3" id="text-15-1">
<ol class="org-ol">
<li>Client Hello &#x2013; Klient posílá informace o podporovaných šifrách, verzi TLS</li>
<li>Server Hello &#x2013; Server posílá informace</li>
<li>Server Certificate &#x2013; Server sděluje informace o certifikátech</li>
<li>Server Key Exchange &#x2013; Server zahajuje výměnu klíčů</li>
<li>Client Certificate &#x2013; Klientský certifikát</li>
<li>Client Key Exchange &#x2013; Klient opětuje výměnu klíčů</li>
<li>Client Certificate Verify &#x2013; Klient verifikuje certifikát serveru</li>
<li>Client Change Cipher Spec &#x2013; Klient mění používanou šifru</li>
<li>Server Change Cipher Spec &#x2013; Server mění používanou šifru</li>
<li>Encrypted application data &#x2013; Tok šifrovaných aplikačních dat</li>
</ol>

<p>
Pro výměnu klíčů se používý asymetrická kryptografie (Diffie-Hellman, RSA,
Elliptic Curve).
</p>

<p>
Pro šifrování dat se využívá symetrická kryptografie (je rychlejší).
</p>
</div>
</div>

<div id="outline-container-org237d268" class="outline-3">
<h3 id="org237d268"><span class="section-number-3">15.2</span> Vlastnosti</h3>
<div class="outline-text-3" id="text-15-2">
<ul class="org-ul">
<li>Šifrování: obě strany majá vygenerovaný tajný klíč</li>
<li>Autentizace: obě strany si navzájem  vyění a ověří certifikáty</li>
<li>Integrita dat: šifrovaná data obsahují hash</li>
<li>Šifrovaná data obsahují sekvenční číslo jako prevenci proti přehrání</li>
<li>Před zašifrováním mohou být data komprimována</li>
</ul>
</div>
</div>

<div id="outline-container-org7b201ce" class="outline-3">
<h3 id="org7b201ce"><span class="section-number-3">15.3</span> Omezení TLS</h3>
<div class="outline-text-3" id="text-15-3">
<p>
TLS vyžaduje ověřený certifikát serveru, jinak je možný útok Man in the middle.
Nezajišťuje autentizaci odesilatele. Problematická implementace na zařízeních s
omezenými prostředky (IoT). Problém při potřebě monitorovat provoz.
</p>
</div>
</div>
</div>

<div id="outline-container-orgaacea9f" class="outline-2">
<h2 id="orgaacea9f"><span class="section-number-2">16</span> IPSec</h2>
<div class="outline-text-2" id="text-16">
<p>
Zabezpečuje přenos pro IPv4 a IPv6. Zajišťuje autentizaci (RSA), šifrování a
integritu dat. Využívá protokoly AH (Authentication Header) a ESP (Encapsulation
Security Payload). Pracuje ve dvou režimech: tunelovacím a transtortním.
Parametry spojení se ukládají do databáze VPN spojení SA (Security Association).
</p>
</div>

<div id="outline-container-orgd2efee2" class="outline-3">
<h3 id="orgd2efee2"><span class="section-number-3">16.1</span> Protokol AH (Authentication Header)</h3>
<div class="outline-text-3" id="text-16-1">
<p>
Chrání datagram IP pomocí kryptografického hashe HMAC-MD nebo HMAC-SHA. Hash se
počítá nad položkami hlavičky, které se během cesty nemění. Zajišťuje
autentizaci, integritu dat a chrání proti přehrání. Nezajišťuje důvěrnost dat.
</p>
</div>
</div>

<div id="outline-container-orge790b62" class="outline-3">
<h3 id="orge790b62"><span class="section-number-3">16.2</span> Protokol ESP (Encapsulation Security Protocol)</h3>
<div class="outline-text-3" id="text-16-2">
<p>
Zapouzdřuje a chrání data IP datagramu. Zajišťuje autentizaci, důvěrnost a
integritu dat, chrání proti přehrátí. Nezajišťuje ochranu vnější hlavičky IP.
Pro šifrování využívá DES, 3DES, AES. Pro autentizaci a integritu dat využívá
HMAC.
</p>
</div>
</div>
</div>

<div id="outline-container-org860cdcc" class="outline-2">
<h2 id="org860cdcc"><span class="section-number-2">17</span> Zabezpečení emailových zpráv pomocí PGP (Pretty Good Privacy)</h2>
<div class="outline-text-2" id="text-17">
<p>
Zajišťuje integritu dat (MD5), autentizaci odesilatele (RSA) i šifrování (IDEA).
Zpráva je podepsána soukromým klíčem odesilatele. Zpráva je zašifrována tajným
klíčem. Tajný klíč je zašifrován veřejným klíčem příjemce a připojen ke zprávě.
Odesilatel musí mít přístup k veřejnému klíči přijemce pro zašifrování zprávy.
Příjemce musí mít přístup k veřejnému klíči odesilatele pro ověření identity.
</p>
</div>
</div>

<div id="outline-container-org0f7bdbd" class="outline-2">
<h2 id="org0f7bdbd"><span class="section-number-2">18</span> Autentizace zpráv směrovacího protokolu OSPF</h2>
<div class="outline-text-2" id="text-18">
<p>
Protokol je zapouzdřen v IP. Využívá krypto hash MD5 a sdílený tajný klíč.
Používá sekvenční číslo proti přehrání podepsaného paketu. Vstupem pro
algoritmus MD5 je celý paket OSPF a tajný klíč. Pro OSPFv2 je použít pro
autentizaci algoritmus HMAC-SHA
</p>
</div>
</div>

<div id="outline-container-org4fbad85" class="outline-2">
<h2 id="org4fbad85"><span class="section-number-2">19</span> Domain Name System</h2>
<div class="outline-text-2" id="text-19">
<p>
DNS je globální adresář názvů počítačů a dalších identifikátorů síťových
zařízení a služeb
</p>

<p>
DNS je tvořeno:
</p>
<ol class="org-ol">
<li>Jmenným prostorem DNS adres a mapování adres na IP adresy</li>
<li>Uložení prostoru jmen DNS a správa tohoto prostoru</li>
<li>Přístup k datům v DNS a vyhledávání</li>
</ol>

<p>
DNS je implementováno pomocí hierarchického rozdělení prostoru doménových jmen.
Globální databáze DNS jmen je distribuována na servery. Pro DNS existuje
stejnojmenný protokol, který přenáší data rezolucí DNS a přenosů zón.
</p>

<p>
Hierarchické uspořádání je ve formě inverzního stromu.
</p>

<p>
Pro vyhledání doménového jména dle IP adresy je vytvořena speciální doména
<code>arpa</code>, která uchovává mapování.
</p>
</div>

<div id="outline-container-orgaa86633" class="outline-3">
<h3 id="orgaa86633"><span class="section-number-3">19.1</span> Správa domén</h3>
<div class="outline-text-3" id="text-19-1">
<p>
Globálně je DNS spravováno společností ICANN (Internet Corporation for Assigned
Names and Numbers). ICANN akredituje registrátory dalších doménových jmen (Top
Level Domain):
</p>
<ul class="org-ul">
<li>Národní: .cz, .uk, .de</li>
<li>Generické: .com, .edu, .org</li>
</ul>

<p>
Domény první úrovně (TLD) spravuje IANA. Registrace národních domén spravuje
národní správce domény. Za ČR je to CZ-NIC.
</p>

<p>
Domény nižších úrovní spravuje vlastník domény (delegace domén).
</p>
</div>
</div>

<div id="outline-container-org0bf09c4" class="outline-3">
<h3 id="org0bf09c4"><span class="section-number-3">19.2</span> Správa IP adres</h3>
<div class="outline-text-3" id="text-19-2">
<p>
IP adresy jsou spravovány a registrovány regionálními registrátory (RIC). Pro
Evropu a část Asie je to RIPE NCC. V jednotlívých státech spravují lokální
registrátoři (LIR) a poskytovatelé připojení. V případě použití Provider
Independent adres může koncový uživatel mít adresu přidělenou přímo od RIR,
která je nezávislá na dalších registrátorech.
</p>
</div>
</div>

<div id="outline-container-orgbf1db6c" class="outline-3">
<h3 id="orgbf1db6c"><span class="section-number-3">19.3</span> Whois</h3>
<div class="outline-text-3" id="text-19-3">
<p>
Služba pro zjišťování vlastníka IP adresy.
</p>
</div>
</div>

<div id="outline-container-org9bc8483" class="outline-3">
<h3 id="org9bc8483"><span class="section-number-3">19.4</span> DNS server</h3>
<div class="outline-text-3" id="text-19-4">
<p>
Prostor doménových jmen fyzicky uložen na server DNS. Servery DNS obsahují
informace o stromové struktuře i datech. Každý server spravuje jen část prostoru
doménových jmen &#x2013; Zónu.
</p>

<p>
Typy DNS serverů:
</p>
<ul class="org-ul">
<li>Primární (Master, primary) &#x2013; Obsahuje úplné (autoritativní) záznamy o
doménách. Pro každou doménu existuje pouze jeden primární nameserver</li>
<li>Sekundární (Slave, secondary) &#x2013; Uchovává autoritativní kopie dat od
primárních serverů (přenos zón)</li>
<li>Záložní (Caching-only) &#x2013; Pouze přijíma dotazy, které předává dalším serverům
DNS. Ukládá odpovědi do vyrovnávací paměti. Poskytuje neautoritativni
odpovědi.</li>
</ul>
</div>
</div>

<div id="outline-container-orgb99ff72" class="outline-3">
<h3 id="orgb99ff72"><span class="section-number-3">19.5</span> Protokol DNS</h3>
<div class="outline-text-3" id="text-19-5">
<p>
Aplikační protokol nad UDP, port 53.
</p>

<p>
Struktura DNS zprávy je následující:
</p>
<ul class="org-ul">
<li>Header</li>
<li>Question</li>
<li>Answer</li>
<li>Authority</li>
<li>Additional</li>
</ul>
</div>
</div>

<div id="outline-container-org16f3aaf" class="outline-3">
<h3 id="org16f3aaf"><span class="section-number-3">19.6</span> DNS rezoluce</h3>
<div class="outline-text-3" id="text-19-6">
<p>
Komunikace DNS je typu klient &#x2013; server. Dotazy klienta vyřizuje systémová
rutina OS: Resolver.
</p>

<p>
Rezoluje je proces vyhledání odpovědi v systému DNS. Využívá stromovou strukturu
jmen a kořenové DNS servery. Rezoluce začíná od kořenových serverů, těch je 13 a
obsahují speciální kořenovou zónu <code>hint</code>.
</p>
</div>

<div id="outline-container-orgd23e03e" class="outline-4">
<h4 id="orgd23e03e"><span class="section-number-4">19.6.1</span> Rekurzivní dotaz</h4>
<div class="outline-text-4" id="text-19-6-1">
<p>
Pokud server nezná odpověď, přepošle dotaz dalším serverům. Rekurzivní dotaz si
ukládá do paměti cache pro další použití.
</p>
</div>
</div>

<div id="outline-container-org12665ce" class="outline-4">
<h4 id="org12665ce"><span class="section-number-4">19.6.2</span> Iterativní dotaz</h4>
<div class="outline-text-4" id="text-19-6-2">
<p>
Server vrátí nejlepší možnou odpověď. Pokud ale nezná přesnou odpověď, vrátí
odkaz na server, který může znát odpověď.
</p>
</div>
</div>
</div>

<div id="outline-container-org8f0e96f" class="outline-3">
<h3 id="org8f0e96f"><span class="section-number-3">19.7</span> Přenos zón</h3>
<div class="outline-text-3" id="text-19-7">
<p>
Přenos zón je komunikace mezi servery DNS. Využívá se k aktualizaci záznamů na
DNS serverech. Je možný celkový přenos zón (AXFR) nebo přírůstkový přenos
(IXFR), kde sekundární server posílá s výzvou záznam SOA a primární server vrátí
rozdílové změny.
</p>

<p>
Mechanismus DNS notify upozorňuje o změně zóny.
</p>
</div>
</div>

<div id="outline-container-orgf53820e" class="outline-3">
<h3 id="orgf53820e"><span class="section-number-3">19.8</span> Typy záznamů v DNS</h3>
<div class="outline-text-3" id="text-19-8">
</div>
<div id="outline-container-org667d6de" class="outline-4">
<h4 id="org667d6de"><span class="section-number-4">19.8.1</span> Start of Authority (SOA)</h4>
<div class="outline-text-4" id="text-19-8-1">
<p>
Poskytuje základní informace o zóně. Každá zóna má právě jeden SOA.
</p>

<p>
Obsahuje:
</p>
<ul class="org-ul">
<li>Název primárního serveru a emailovou adresu správce</li>
<li>Sériové číslo identifikující změnu záznamu</li>
<li>Interval pro zjišťování změny (na sekundárních serverech)</li>
<li>Doba, po které se server pokusí aktualizovat zónu v případě ne)spěšného přenosu</li>
<li>Doba platnosti dat na sekundátním serveru</li>
<li>Implicitní doba TTL záznamů v zónovém souboru dané zóny</li>
</ul>
</div>
</div>

<div id="outline-container-org6a6a94d" class="outline-4">
<h4 id="org6a6a94d"><span class="section-number-4">19.8.2</span> Name Server (NS)</h4>
<div class="outline-text-4" id="text-19-8-2">
<p>
Určuje autoritativní servery pro danou zónu. Slouží k budování hierarchické
struktury DNS systému. Pro TLD jsou autoritativní servery uvedeny v seznamu
root.zone na IANA.
</p>
</div>
</div>

<div id="outline-container-org53b1eb4" class="outline-4">
<h4 id="org53b1eb4"><span class="section-number-4">19.8.3</span> A</h4>
<div class="outline-text-4" id="text-19-8-3">
<p>
Přímé mapování doménových adres na IPv4 adresy.
</p>
</div>
</div>

<div id="outline-container-org0b152c3" class="outline-4">
<h4 id="org0b152c3"><span class="section-number-4">19.8.4</span> AAAA</h4>
<div class="outline-text-4" id="text-19-8-4">
<p>
Přímé mapování doménových jmen na IPv6 adresy.
</p>
</div>
</div>

<div id="outline-container-orgb2b6a1c" class="outline-4">
<h4 id="orgb2b6a1c"><span class="section-number-4">19.8.5</span> Mail Exchange (MX)</h4>
<div class="outline-text-4" id="text-19-8-5">
<p>
Mapuje adresy poštovních serverů. Přesměrovává poštu pro danou doménu na
konkrétní poštovní server. Lze mít více serverů s různou prioritou.
</p>
</div>
</div>

<div id="outline-container-orgd719787" class="outline-4">
<h4 id="orgd719787"><span class="section-number-4">19.8.6</span> Canonical Name (CNAME)</h4>
<div class="outline-text-4" id="text-19-8-6">
<p>
Mapuje alias zařízení na kanonické jméno počítače. Síťové zařízení smí mít více
aliasů. Alias ale nesmí stát na pravé staně záznamu.
</p>
</div>
</div>

<div id="outline-container-org615648c" class="outline-4">
<h4 id="org615648c"><span class="section-number-4">19.8.7</span> Domain Name Pointer (PTR)</h4>
<div class="outline-text-4" id="text-19-8-7">
<p>
Mapuje IPv4 a IPv6 adresu zpětně na doménovou adresu. Využívá speciální podstrom
<code>in-addr.arpa</code> a <code>ip6.arpa</code>.
</p>
</div>
</div>

<div id="outline-container-orge173476" class="outline-4">
<h4 id="orge173476"><span class="section-number-4">19.8.8</span> Naming Autority Pointer (NAPTR)</h4>
<div class="outline-text-4" id="text-19-8-8">
<p>
Mapuje řetězce na data. Podporuje dynamickou konfiguraci systému. Používá
regulární výrazy pro dynamické záznamy v DNS. Příklad je lokaližace VoIP
serveru.
</p>
</div>
</div>

<div id="outline-container-org421758f" class="outline-4">
<h4 id="org421758f"><span class="section-number-4">19.8.9</span> Service Record (SRV)</h4>
<div class="outline-text-4" id="text-19-8-9">
<p>
Loaklizuje služby (například SIP, XMPP &#x2026;). Slouží také pro load balancing nebo
zálohování.
</p>
</div>
</div>

<div id="outline-container-org261e45e" class="outline-4">
<h4 id="org261e45e"><span class="section-number-4">19.8.10</span> Text (TXT)</h4>
<div class="outline-text-4" id="text-19-8-10">
<p>
Obsahuje textová data. Dodatečné informace o doméně, serveru, správci a podobně.
Slouží také k ověření mailových serverů nebo ověření vlastnictví domény pro
Google Apps.
</p>
</div>
</div>
</div>

<div id="outline-container-org29b80bf" class="outline-3">
<h3 id="org29b80bf"><span class="section-number-3">19.9</span> Zabezpečení systému DNS</h3>
<div class="outline-text-3" id="text-19-9">
<p>
DNS je distribuovaná veřejná služba, která je potřeba k jakékoliv komunikaci na
internetu. Je potřeba zajistit zejména integritu dat a autentizaci zdroje dat.
</p>
</div>

<div id="outline-container-orge3a0320" class="outline-4">
<h4 id="orge3a0320"><span class="section-number-4">19.9.1</span> Bezpečnostní rizika</h4>
<div class="outline-text-4" id="text-19-9-1">
<p>
Podvržené odpovědi mohou vracet neautorizované odpovědi na dotaz klienta.
Podvržená data v paměti cache mohou zneplatnit data pro mnoho klientů. Při DoS
útocích může dojít k blokování jakékoliv DNS rezoluce.
</p>
</div>
</div>

<div id="outline-container-orgc1bc136" class="outline-4">
<h4 id="orgc1bc136"><span class="section-number-4">19.9.2</span> DNSSEC</h4>
<div class="outline-text-4" id="text-19-9-2">
<p>
Zajišťuje integritu a autentizaci dat v DNS. Zabezpečuje data DNS pomocí
asymetrické kryptografie (podepisování). Záznamy v DNS zónách jsou podepsány
pomocí Zone Signing Key (ZSK). Klíče pro podepisování záznamů jsou dále
podepsány pomocí Key Signing Key (KSK).
</p>

<p>
Při použíti DNSSEC nedochází k šifrování DNS provozu.
</p>

<p>
DNSSEC definuje nové záznamy DNS:
</p>
<ul class="org-ul">
<li>DNSKEY: Veřejný klíč pro ověření podpisů</li>
<li>RRSIG: Podpis daného záznamu</li>
<li>NSEC, NSEC3: Odkaz na další záznam při dotazu na neexistující doménu</li>
<li>DS: Záznam pro ověření záznamu DNSKEY, uležen v nadřazené doméně.</li>
</ul>

<p>
Při použití DNSSEC se využívá Chain of Trust. Jední se o mechanismus ověření
pravosti klíče domény nadřazenou doménou. Pro každou zónu existuje pár klíčů
(veřejný &#x2013; tajný). Zabezpečení významně zvyšuje velikost paketu DNS.
</p>
</div>
</div>
</div>

<div id="outline-container-orge128bbc" class="outline-3">
<h3 id="orge128bbc"><span class="section-number-3">19.10</span> Monitorování provozu DNS</h3>
<div class="outline-text-3" id="text-19-10">
<p>
Problémem DNS je velká míra informací vztahujících se k odesilateli. IP adresa
lze lokalizovat. Podle meta informací lze zjistit lokální konfiguraci DNS
serveru, podporu IPv6&#x2026; Informace získané z dotazu DNS napovídají, co uživatel
požaduje za služby, jaké stránky navštěvuje&#x2026;
</p>

<p>
DNS byl původně navržen jako veřejná služba přenášející otevřená data.
</p>

<p>
Lze použít technologii DNS over TLS (DoT), kdy je DNS dotaz šifrován a je viditelný
pouze vybranému DNS serveru. Problém je při výběru serveru a nastavéní
šifrování.
</p>

<p>
Další možností je DNS over HTTPS (DoH). Dotazy jsou posílány serveru DNS, kterů
je předkonfigurován ve webovém prohlížeči.
</p>

<p>
Ani jedna z těchto metod neřeší soukromí, pouze problém přesouvají. DNS server
bude vždy vidět rozšifrované DNS dotazy (problém při použití například Google
DNS).
</p>
</div>
</div>
</div>

<div id="outline-container-org44773b4" class="outline-2">
<h2 id="org44773b4"><span class="section-number-2">20</span> Hlasové služby</h2>
<div class="outline-text-2" id="text-20">
<p>
Klasické telefonní sítě PTSN (Public Switched Telephone Networt) se skládá ze 4
prvků:
</p>
<ol class="org-ol">
<li>Koncové zařízení</li>
<li>Lokální smyčka</li>
<li>Ústředna</li>
<li>Páteřní spoje</li>
</ol>

<p>
Klasická telefonní síť garantuje šířku pásma a spolehlivý přenos. U digitálních
ústředen je dobrá kvalita přenosu. Klasický telefon může být napájen z telefonní
linky. Díky dedikovaným spojům jsou spolehlivé a bezchybné. Mají zavedené
standardy a poskytují další služby.
</p>

<p>
IP telefonie musí zajišťovat služby srovnatelné s PTSN a navíc musí být
integrovaná a kompatibilní s PTSN.
</p>
</div>

<div id="outline-container-orgdc4ef76" class="outline-3">
<h3 id="orgdc4ef76"><span class="section-number-3">20.1</span> Funkce IP telefonie</h3>
<div class="outline-text-3" id="text-20-1">
<p>
IP telefonie musí převádět hlas na IP datagramy. Musí řídit komunikaci přes
ústřednu nebo mezi telefony. Musí umožňovat registraci účastníků, adresování
hovorů (telefonní číslo, URI), směrování hovorů, vytváření hovorů, udržování
spojení. Důležitou vlastností je možnost připojení do klasického telefonního
systému PTSN.
</p>
</div>
</div>

<div id="outline-container-org27e7e91" class="outline-3">
<h3 id="org27e7e91"><span class="section-number-3">20.2</span> Kódování hlasu</h3>
<div class="outline-text-3" id="text-20-2">
<ol class="org-ol">
<li>Vzorḱování analogového signálu</li>
<li>Kvantifikace vzorků pomocí &mu; -law nebo &alpha; -law</li>
<li>Kodování hodnot na binární čísla (PCM, ADPCM, CS-ACELP)</li>
<li>Komprese dat</li>
</ol>

<p>
Lidská řeč se pohybuje v rozsahu 200 Hz &#x2013; 9 kHz. Telefonní linky běžně
přenášeji zvuk v rozsahu 300 Hz &#x2013; 4 kHz.
</p>

<p>
Pro korektní kódování hlasu je potřeba vzorkovat dvojnásobnou frekvencí, než je
frekvence zvuku. Například pro telefonní linku 4 kHz je třeba vzorkovat na
frekvenci 8 kHz, tj. perioda 125 &mu; s.
</p>

<p>
Různé protokoly a algoritmy mají odlišná přenosová pásma v závislosti na počtu
bitů na vzorek. Například G.711 s algoritmem PCM využívá 8 bitů na vzorek,
celkové přenosové pásmo je tedy \(2 \times 4 kHz \times 8 b/sample = 64 kb/s\).
</p>
</div>
</div>

<div id="outline-container-org80e5b01" class="outline-3">
<h3 id="org80e5b01"><span class="section-number-3">20.3</span> Zapouzdření hlasu</h3>
<div class="outline-text-3" id="text-20-3">
<p>
Hlasové vzorky o určité velikosti (časové délce), jsou uloženy do protokolu RTP.
Ten je zapouzdřen do UDP, IP, Ethernetu. Běžná režie je tedy 58 B.
</p>
</div>

<div id="outline-container-org5e9ef19" class="outline-4">
<h4 id="org5e9ef19"><span class="section-number-4">20.3.1</span> Příklad</h4>
<div class="outline-text-4" id="text-20-3-1">
<p>
Vypočtěte potřebnou šířku pásma pro jeden telefonní hovor při použítí kodeku
G.711. Telefon posílá hlasové rámce každých 20 ms. Režie je běžná (58 B).
</p>

<p>
G.711 vyžaduje pásmo 64 kb/s, tj. 8000 B/s. Hlasové rámce jsou posílány každých
20 ms, tj. celkem 50 za sekundu.
</p>

<p>
ŘEŠENÍ 1:
</p>
<ol class="org-ol">
<li>Vypočteme, kolik bytů se v jednom rámci:
<ul class="org-ul">
<li>Hlasová data: \(8000 / 50 = 160 B\)</li>
<li>Režie: 58 B</li>
<li>Celkem&gt; \(160 + 58 = 218 B\)</li>
</ul></li>
<li>Dopočítáme, jaká je hodnota za 1 sekundu
<ul class="org-ul">
<li>\(218 \times 50 = 10900 B\)</li>
</ul></li>
<li>Řešení je tedy \(10900 B/s = 87200 b/s = 87.2 kb/s\).</li>
</ol>

<p>
ŘEŠENÍ 2:
</p>
<ol class="org-ol">
<li>Počítáme s hlasovým pásmem 8000 B/s, pouze roznásobíme nutnou režii:
<ul class="org-ul">
<li>\(58 \times 50 = 2900 B\)</li>
</ul></li>
<li>A přičteme hlasová data
<ul class="org-ul">
<li>\(2900 + 8000 = 10900 B\)</li>
</ul></li>
<li>Řešení je tedy \(10900 B/s = 87.2 kb/s\)</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-orgb5e0463" class="outline-3">
<h3 id="orgb5e0463"><span class="section-number-3">20.4</span> Architektura systému SIP</h3>
<div class="outline-text-3" id="text-20-4">
<p>
SIP je zkratka pro Session Initiation Protocol. Jedná se o aplikační protokol
nad UDP určený pro signalizaci VoIP. Provádí registraci uživatelů, navázaní
spojení, směrování hovorů, adresování pomocí URI. Neprování správu relací po
jejich vytvoření, nezajišťuje kvalitu přenosu, nezajišťuje přenos dat.
</p>

<p>
SIP tvoří globální distribuovanou architekturu v celém internetu. Systém
umožňuje vyhledat a směrovat hovor na libovolný SIP telefon.
</p>
</div>

<div id="outline-container-org88ce135" class="outline-4">
<h4 id="org88ce135"><span class="section-number-4">20.4.1</span> SIP server (User Agent Server)</h4>
<div class="outline-text-4" id="text-20-4-1">
<ul class="org-ul">
<li>Proxy server: analyzuje zprávy, směruje hovory</li>
<li>Lokalozační server: informace o umístění klientů</li>
<li>Server pro směrování: next-hop u alternativního SIP serveru</li>
<li>Registrační server: přijímá žádosti o registraci</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org702ca3c" class="outline-3">
<h3 id="org702ca3c"><span class="section-number-3">20.5</span> Adresování a směrování SIP</h3>
<div class="outline-text-3" id="text-20-5">
<p>
Adresování probíhá pomocí SIP uri ve tvaru <code>sip:user@domain</code>. Směrovací
inforamce jsou uloženy v SIP hlavičce&gt; <code>Via</code>, <code>Route</code>, <code>Record-route</code>. Směrování
provádějí servery SIP na cestě staticky nebo dynamicky pomocí DNS. Po výměně
kontaktů v hlavičce <code>Contact</code> jsou zprávy přenášeny přímo mezi klienty.
</p>
</div>
</div>

<div id="outline-container-orga296db4" class="outline-3">
<h3 id="orga296db4"><span class="section-number-3">20.6</span> Vytváření spojení</h3>
<div class="outline-text-3" id="text-20-6">
</div>
<div id="outline-container-orgd7f11ea" class="outline-4">
<h4 id="orgd7f11ea"><span class="section-number-4">20.6.1</span> Registrace</h4>
<div class="outline-text-4" id="text-20-6-1">
<p>
Používá se metoda REGISTER. Ukládá se poloha klienta do lokalizační databáze.
Klient posílá svou IP adresu a port SIP serveru ve své doméně. Klient mapuje ID
uživatele na adresu zařízení. Registrační server udržuje pro svou doménu
lokalizační údaje o všech aktivních klientech.
</p>
</div>
</div>

<div id="outline-container-orga34dae2" class="outline-4">
<h4 id="orga34dae2"><span class="section-number-4">20.6.2</span> Ustavení spojení</h4>
<div class="outline-text-4" id="text-20-6-2">
<p>
Používá se metoda INVITE. Pokud je volaný připravený, odpoví zprávou 200 OK,
volající potvrdí přijetí a začne komunikace. Metoda INVITE může vyžadovat autorizaci.
</p>
</div>
</div>
</div>

<div id="outline-container-org3c00b13" class="outline-3">
<h3 id="org3c00b13"><span class="section-number-3">20.7</span> Protokol SIP</h3>
<div class="outline-text-3" id="text-20-7">
<p>
Obsahuje základní metody:
</p>
<ul class="org-ul">
<li>REGISTER &#x2013; Žádost o registraci</li>
<li>INVITE, ACK, CANCEL &#x2013; Vytváření spojení</li>
<li>BYE &#x2013; Ukončení spojení</li>
<li>OPTIONS &#x2013; Zjišťování možností přenosu</li>
<li>INFO &#x2013; Přenos aplikačních informací</li>
<li>MESSAGE &#x2013; Textové zprávy</li>
<li>SUBSCRIBE, NOTIFY &#x2013; Zasílání upozornění na události</li>
<li>PUBLISH &#x2013; Zveřejnění stavu událostí</li>
</ul>
</div>
</div>

<div id="outline-container-orgc989efe" class="outline-3">
<h3 id="orgc989efe"><span class="section-number-3">20.8</span> Protokol SDP</h3>
<div class="outline-text-3" id="text-20-8">
<p>
Session Description Protocol. Přenášen ve zprávách SIP typu INVITE a OK.
Přenášejí se informace potřebné pro přijímání hlasového toku.
</p>
</div>
</div>

<div id="outline-container-org129cc37" class="outline-3">
<h3 id="org129cc37"><span class="section-number-3">20.9</span> Protokol RTP</h3>
<div class="outline-text-3" id="text-20-9">
<p>
Real-Time Transport Protocol. Používá se pro přenost hlasových či obrazových
dat. Obsahuje typ přenášených dat, sekvenční číslo, časovou značku. Pro každý
směr a typ médií se otevírá samostatný tok RTP. Pro monitorování kvality přenosů
se používá RTP Control Protocol (RTCP).
</p>
</div>
</div>

<div id="outline-container-org3f8926b" class="outline-3">
<h3 id="org3f8926b"><span class="section-number-3">20.10</span> Zabezpečení VoIP</h3>
<div class="outline-text-3" id="text-20-10">
</div>
<div id="outline-container-org9c3e9ba" class="outline-4">
<h4 id="org9c3e9ba"><span class="section-number-4">20.10.1</span> Bezpečnostní rizika</h4>
<div class="outline-text-4" id="text-20-10-1">
<ul class="org-ul">
<li>Odposlech</li>
<li>Viry</li>
<li>Spam over IP Telephony (SPIT)</li>
<li>Phishing over IP Telephony (PHIT)</li>
<li>Útoky DoS, DDoS</li>
<li>Neautorizované použití služby</li>
<li>Výpadky napájení</li>
</ul>
</div>
</div>

<div id="outline-container-org2f233ec" class="outline-4">
<h4 id="org2f233ec"><span class="section-number-4">20.10.2</span> Způsoby zabezpečení</h4>
<div class="outline-text-4" id="text-20-10-2">
<ul class="org-ul">
<li>Řízení přístupu k síťovému médiu technologií 802.1x</li>
<li>Oddělení hlasového provozu pomocí VLAN</li>
<li>Zabezpečení spojení pomocí IPSec nebo Secure RTP</li>
<li>Napájení Power over Ethernet</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org50dc959" class="outline-3">
<h3 id="org50dc959"><span class="section-number-3">20.11</span> Komerční aplikace</h3>
<div class="outline-text-3" id="text-20-11">
<p>
Většinou mívají nestandardní protokoly. Bývají decentralizované (peer-to-peer).
Využívají proprietární správu uživatelských účtů. Nejsou garantované. Mají
omezené možnosti propojení s PTSN či klasickými VoIP.
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: John Doe</p>
<p class="date">Created: 2019-12-28 Sat 12:09</p>
</div>
</body>
</html>
