<?xml version="1.0" encoding="utf-8"?>
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-12-26 Thu 12:23 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Síťové aplikace a správa sítí</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="John Doe" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/styles/readtheorg/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/styles/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/styles/readtheorg/js/readtheorg.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Síťové aplikace a správa sítí</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgc2f2f10">1. Architektura sítí</a>
<ul>
<li><a href="#org2af95e3">1.1. Model OSI</a></li>
<li><a href="#org0c93973">1.2. Model IEEE</a></li>
<li><a href="#org1e638b2">1.3. Model TCP/IP</a></li>
</ul>
</li>
<li><a href="#org3ac5cdd">2. Adresování</a>
<ul>
<li><a href="#orgb691d35">2.1. Adresa</a></li>
<li><a href="#org89673da">2.2. Adresování a směrování v modelu TCP/IP</a></li>
<li><a href="#org2f1ea35">2.3. Adresování a směrování na fyzickém rozhraní (L2)</a>
<ul>
<li><a href="#orgf0515be">2.3.1. Speciální adresy L2 vrstvy</a></li>
</ul>
</li>
<li><a href="#org37fcfe1">2.4. Adresování a směrování na síťové (IP) vrstvě</a>
<ul>
<li><a href="#org114999c">2.4.1. Přidělování adres</a></li>
</ul>
</li>
<li><a href="#org33cbc87">2.5. Adresování a směrování na transportní vrstvě</a></li>
<li><a href="#orge41ca17">2.6. Adresování na aplikační vrstvě</a></li>
</ul>
</li>
<li><a href="#orgafd67ab">3. Základní nástroje pro konfiguraci</a>
<ul>
<li><a href="#orgdfbfa68">3.1. Výpis aktuálního síťového nastavení</a></li>
<li><a href="#orga1ae8f1">3.2. Testování základní konektivity</a></li>
<li><a href="#orge95b0ab">3.3. Kontrola směrování</a></li>
<li><a href="#org3f55b2d">3.4. Testování dosažitelnosti vzdáleného počítače</a></li>
<li><a href="#org9e3bbe1">3.5. Testování dostupnosti služeb</a></li>
<li><a href="#org44308d4">3.6. Výpis otevřených spojení</a></li>
<li><a href="#orgebc55cd">3.7. Sledování komunikace na síťovém rozhraní</a></li>
</ul>
</li>
<li><a href="#org0aae977">4. Programování sítí TCP/IP</a>
<ul>
<li><a href="#org121a8fb">4.1. Komunikace klient &#x2013; server</a></li>
<li><a href="#orgc5b2ee0">4.2. Prostředky pro meziprocesovou komunikaci</a></li>
<li><a href="#orgc874a11">4.3. Sockety</a>
<ul>
<li><a href="#orge093dc0">4.3.1. Funkce v BSD socketech pro vytvoření konkurentního serveru TCP</a></li>
<li><a href="#orgd0b0b0f">4.3.2. UDP schránky</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgc2f2f10" class="outline-2">
<h2 id="orgc2f2f10"><span class="section-number-2">1</span> Architektura sítí</h2>
<div class="outline-text-2" id="text-1">
<p>
Vrstvový model definuje síťové vrstvy.
Každá vrstva určuje obecné funkce poskytované vyšším vrstvám.
Funkce dané vrstvy jsou implementovány příslušnými protokoly dané vrstvy.
Pro služby vyšší vrstvy je činnost nižších vrstev transparentní.
</p>

<p>
Při komunikaci na vrstvách komunikující koncové body leží vždy ve stejné vrstvě
a pro komunikaci se využívá služeb nižších vrstev.
</p>

<p>
Procesy aplikační vrstvy komunikují pomocí socketů (schránek). Ty jsou
identifikovány IP adresou a číslem portu.
</p>
</div>


<div id="outline-container-org2af95e3" class="outline-3">
<h3 id="org2af95e3"><span class="section-number-3">1.1</span> Model OSI</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Model OSI definuje 7 vrstev:
</p>

<ol class="org-ol">
<li>Fyzická vrstva</li>
<li>Linková vrstva</li>
<li>Síťová vrstva</li>
<li>Transportní vrstva</li>
<li>Vrstva sezení</li>
<li>Prezentační vrstva</li>
<li>Aplikační vrstva</li>
</ol>
</div>
</div>

<div id="outline-container-org0c93973" class="outline-3">
<h3 id="org0c93973"><span class="section-number-3">1.2</span> Model IEEE</h3>
<div class="outline-text-3" id="text-1-2">
<p>
Model IEEE definuje 2 vrstvy:
</p>

<ol class="org-ol">
<li>MAC vrstva</li>
<li>LLC vrstva</li>
</ol>
</div>
</div>

<div id="outline-container-org1e638b2" class="outline-3">
<h3 id="org1e638b2"><span class="section-number-3">1.3</span> Model TCP/IP</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Definuje 4 vrstvy:
</p>

<ol class="org-ol">
<li>Vrstva síťového rozhraní (fyzická a linková vrstva dle OSI)</li>
<li>Internetová vrstva (síťová vrstva dle OSI)</li>
<li>Transportní vrstva</li>
<li>Aplikační vrstva</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-org3ac5cdd" class="outline-2">
<h2 id="org3ac5cdd"><span class="section-number-2">2</span> Adresování</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-orgb691d35" class="outline-3">
<h3 id="orgb691d35"><span class="section-number-3">2.1</span> Adresa</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Adresa je způsob identifikace adresáta pomocí jednoznačné informace
</p>
</div>
</div>

<div id="outline-container-org89673da" class="outline-3">
<h3 id="org89673da"><span class="section-number-3">2.2</span> Adresování a směrování v modelu TCP/IP</h3>
<div class="outline-text-3" id="text-2-2">
<p>
Každá vrstva modelu TCP/IP definuje svoje adresování a zajišťuje určitou formu
směrování. Některé služby používají mapování adres mezi vrstvami.
</p>
</div>
</div>

<div id="outline-container-org2f1ea35" class="outline-3">
<h3 id="org2f1ea35"><span class="section-number-3">2.3</span> Adresování a směrování na fyzickém rozhraní (L2)</h3>
<div class="outline-text-3" id="text-2-3">
<p>
Adresuje se konkrétní síťové rozhraní počítače. To je identifikováno 48bitovou
fyzickou adresou. Ta určuje adresování v lokální síti. Prvních 24 bitů je OUI
(Organizational Unique Identifier), zbylých 24 bitů je číslo síťového rozhraní
přiděleného výrobcem karty. L2 rámec obsahuje:
</p>
<ul class="org-ul">
<li>7+1B preambule (synchronizace + typ)</li>
<li>48b source address</li>
<li>48b destination address</li>
<li>16b ethertype</li>
<li>&#x2026; data &#x2026; (max 1500 B)</li>
<li>32b checksum</li>
</ul>
</div>

<div id="outline-container-orgf0515be" class="outline-4">
<h4 id="orgf0515be"><span class="section-number-4">2.3.1</span> Speciální adresy L2 vrstvy</h4>
<div class="outline-text-4" id="text-2-3-1">
<ul class="org-ul">
<li>Broadcast: <code>FF FF FF FF FF FF</code></li>
<li>IPv4 multicast <code>01 00 5e xx xx xx</code></li>
<li>IPv6 multicast <code>33 33 xx xx xx xx</code></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org37fcfe1" class="outline-3">
<h3 id="org37fcfe1"><span class="section-number-3">2.4</span> Adresování a směrování na síťové (IP) vrstvě</h3>
<div class="outline-text-3" id="text-2-4">
<p>
Používá se 32bitová IPv4 adresa nebo 128bitová IPv6 adresa. IP adresa
jednoznačně identifikuje síťové rozhraní počítače v síti. Je určena pro
adresování i mimo lokální síť.
</p>

<p>
IPv4 se může adresovat s využitím tříd (A, B, C, D, E). Používá se <code>netid +
hostid</code>. Délku části <code>netid</code> určuje pevná nebo proměnná maska.
</p>

<p>
Při použití variabilní délky masky se prostor IPv4 adres dá efektivněji využít,
vytváří se podsítě (subnetting). Používá se beztřídní směrování.
</p>
</div>

<div id="outline-container-org114999c" class="outline-4">
<h4 id="org114999c"><span class="section-number-4">2.4.1</span> Přidělování adres</h4>
<div class="outline-text-4" id="text-2-4-1">
<p>
Přidělení IP adres může být provedeno buď manuálně v operačním systému nebo
dynamicky pomocí DHCP.
</p>

<p>
Pro IPv4 se používá protokol DHCPv4. Nové zařízení vyhledává DHCP server na
lokální síti pomocí broadcastu.
</p>

<p>
Pro IPv6 se používá více způsobů přidělování adres. Typ přidělení oznamuje
směrovač zprávou ICMPv6 RA. Typ konfigurace může být:
</p>

<ol class="org-ol">
<li>Bezstavová konfigurace pomocí SLAAC (Stateless Autoconfiguration)</li>
<li>Bezstavová konfigurace pomocí SLAAC a DHCPv6</li>
<li>Stavová konfigurace pomocí DHCPv6</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-org33cbc87" class="outline-3">
<h3 id="org33cbc87"><span class="section-number-3">2.5</span> Adresování a směrování na transportní vrstvě</h3>
<div class="outline-text-3" id="text-2-5">
<p>
Adresuje je konkrétní služba pomocí 16b čísla portu (uvedena v <code>/etc/services</code>).
Číslo portu jednoznačně identifiuje službu na daném počítači. Rozlišujeme
spojované (TCP) a nespojované (UDP) služby.
</p>
</div>
</div>

<div id="outline-container-orge41ca17" class="outline-3">
<h3 id="orge41ca17"><span class="section-number-3">2.6</span> Adresování na aplikační vrstvě</h3>
<div class="outline-text-3" id="text-2-6">
<p>
Je závislé na konkrétní aplikaci. Příklady:
</p>
<ul class="org-ul">
<li>Elektronická pošta: xlogin00@stud.fit.vutbr.cz</li>
<li>DNS: eva.fit.vutbr.cz</li>
<li>WWW: <a href="http://www.fit.vutbr.cz/index.html">http://www.fit.vutbr.cz/index.html</a></li>
<li>IP telefonie: sip:login@cesnet.cz</li>
<li>SNMP: 1.3.6.1.2.1.2.1 (ifNumber)</li>
<li>LDAP: cn=login, ou=Students, dc=vutbr, dc=cz</li>
<li>FTP: /public/index.txt</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgafd67ab" class="outline-2">
<h2 id="orgafd67ab"><span class="section-number-2">3</span> Základní nástroje pro konfiguraci</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-orgdfbfa68" class="outline-3">
<h3 id="orgdfbfa68"><span class="section-number-3">3.1</span> Výpis aktuálního síťového nastavení</h3>
<div class="outline-text-3" id="text-3-1">
<ul class="org-ul">
<li><code>ifconfig</code>, <code>ip link</code>, <code>ip address</code> (Linux)</li>
<li><code>ipconfig</code> (Windows)</li>
</ul>
</div>
</div>

<div id="outline-container-orga1ae8f1" class="outline-3">
<h3 id="orga1ae8f1"><span class="section-number-3">3.2</span> Testování základní konektivity</h3>
<div class="outline-text-3" id="text-3-2">
<ul class="org-ul">
<li><code>ping</code>, <code>pathping</code></li>
</ul>
</div>
</div>

<div id="outline-container-orge95b0ab" class="outline-3">
<h3 id="orge95b0ab"><span class="section-number-3">3.3</span> Kontrola směrování</h3>
<div class="outline-text-3" id="text-3-3">
<ul class="org-ul">
<li><code>netstat -r</code>, <code>ip route</code> : Vypíše směrovací tabulku</li>
<li><code>arp -a</code>, <code>ip neigh</code> : Vypíše tabulku ARP, respektive Neighbour Cache</li>
</ul>
</div>
</div>

<div id="outline-container-org3f55b2d" class="outline-3">
<h3 id="org3f55b2d"><span class="section-number-3">3.4</span> Testování dosažitelnosti vzdáleného počítače</h3>
<div class="outline-text-3" id="text-3-4">
<ul class="org-ul">
<li><code>tracert</code>, <code>traceroute</code>, <code>tcptraceroute</code></li>
</ul>
</div>
</div>

<div id="outline-container-org9e3bbe1" class="outline-3">
<h3 id="org9e3bbe1"><span class="section-number-3">3.5</span> Testování dostupnosti služeb</h3>
<div class="outline-text-3" id="text-3-5">
<ul class="org-ul">
<li><code>telnet &lt;addr&gt; &lt;port&gt;</code></li>
</ul>
</div>
</div>

<div id="outline-container-org44308d4" class="outline-3">
<h3 id="org44308d4"><span class="section-number-3">3.6</span> Výpis otevřených spojení</h3>
<div class="outline-text-3" id="text-3-6">
<ul class="org-ul">
<li><code>sockstat</code> (FreeBSD)</li>
<li><code>netstat -natu</code> (Linux)</li>
<li><code>netstat -a</code> (Windows)</li>
</ul>
</div>
</div>

<div id="outline-container-orgebc55cd" class="outline-3">
<h3 id="orgebc55cd"><span class="section-number-3">3.7</span> Sledování komunikace na síťovém rozhraní</h3>
<div class="outline-text-3" id="text-3-7">
<ul class="org-ul">
<li><code>tcpdump</code></li>
<li><code>tshark</code></li>
<li>Wireshark (GUI1)</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org0aae977" class="outline-2">
<h2 id="org0aae977"><span class="section-number-2">4</span> Programování sítí TCP/IP</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org121a8fb" class="outline-3">
<h3 id="org121a8fb"><span class="section-number-3">4.1</span> Komunikace klient &#x2013; server</h3>
<div class="outline-text-3" id="text-4-1">
<p>
Jedná se o standardní schema komunikace mezi dvěma procesy. Komunikace je
popsána protokolem. Klient posílá požadavky na zpracování serveru, ten je
zpracuje a pošle odpověď. Komunikace je obvykle zahájena klientem.
</p>

<p>
Protokol je soubor syntaktických a sématnických pravidel určujících výměnu dat.
Popisuje vytvoření spojení, adresování, přenos dat, řízení toku, zabezpečení.
Formálně je protokol specifikován stavovými automaty, gramatikami, formálními
jazyky, Petriho sítěmi, diagramy posloupnosti zpráv nebo algebraickými
prostředky.
</p>
</div>
</div>

<div id="outline-container-orgc5b2ee0" class="outline-3">
<h3 id="orgc5b2ee0"><span class="section-number-3">4.2</span> Prostředky pro meziprocesovou komunikaci</h3>
<div class="outline-text-3" id="text-4-2">
<p>
Unixové roury, Unix to Unix copy, Remote Procedure Call, BSD sockets, Winsock.
</p>
</div>
</div>

<div id="outline-container-orgc874a11" class="outline-3">
<h3 id="orgc874a11"><span class="section-number-3">4.3</span> Sockety</h3>
<div class="outline-text-3" id="text-4-3">
<p>
Aplikační programové rozhraní pro komunikující procesy. Definují konečný
komunikační bod. Implementovány jako abstraktní datové struktury obsahující
údaje pro komunikaci. Jsou jednoznačně implementovány v síti pomocí IP adresy a
čísla portu. Jsou implementovány ve většině programovacích jazyků.
</p>

<p>
Vytvářejí rozhraní na vrstvě L4 (transportní). Rozlišujeme několik typů
schránek. Základní typy jsou:
</p>

<ol class="org-ol">
<li><code>SOCK_STREAM</code> (TCP komunikace)</li>
<li><code>SOCK_DGRAM</code> (UDP datagramy)</li>
<li><code>SOCK_RAW</code> (Holá schránka bez žádného protokolu. Nutno vyplnit všechny
hlavičky ručně)</li>
</ol>
</div>

<div id="outline-container-orge093dc0" class="outline-4">
<h4 id="orge093dc0"><span class="section-number-4">4.3.1</span> Funkce v BSD socketech pro vytvoření konkurentního serveru TCP</h4>
<div class="outline-text-4" id="text-4-3-1">
<ol class="org-ol">
<li><code>socket()</code> &#x2013; Vytvoří schránku</li>
<li><code>bind()</code> &#x2013; Připojení schránky na lokální port</li>
<li><code>listen()</code> &#x2013; Vytrvoření fronty příchozích požadavků</li>
<li><code>accept()</code> &#x2013; Přijímání požadavků</li>
<li><code>fork()</code> &#x2013; Vytvoření synovského procesu</li>
<li><code>read(), write()</code> &#x2013; Výměna dat v rámci synovského procesu</li>
<li><code>close()</code> &#x2013; Zavření schránky synovského procesu</li>
<li><code>exit()</code> &#x2013; Ukončení synovského procesu</li>
<li><code>close()</code> &#x2013; Uzavření schránky rodičovského procesu</li>
</ol>
</div>
</div>

<div id="outline-container-orgd0b0b0f" class="outline-4">
<h4 id="orgd0b0b0f"><span class="section-number-4">4.3.2</span> UDP schránky</h4>
<div class="outline-text-4" id="text-4-3-2">
<p>
Když neběží UDP server, klient pošle zprávu pomocí <code>sendto()</code>, čeká na odpověď
pomocí <code>recvfrom()</code>. Dojde ale k uváznutí, protože UDP neposkytuje možnosti, jak
oznámit nedostupný port. Možná řešení jsou použití timeoutu nebo spojovaných UDP
schránek.
</p>

<p>
Spojované UDP schránky používají funkci <code>connect()</code>, nedochází ale k vytvoření
TCP spojení, pouze se zpracovávají chyby. Funkce <code>connect()</code> zjistí aktuální
stav serveru, v budoucnu však může dojít k ukončení činnosti UDP serveru a
klient to nezjístí. Funkce <code>connect()</code> se tak může volat opakovaně.
</p>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: John Doe</p>
<p class="date">Created: 2019-12-26 Thu 12:23</p>
</div>
</body>
</html>
